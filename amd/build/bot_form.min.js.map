{"version":3,"file":"bot_form.min.js","sources":["../src/bot_form.js"],"sourcesContent":["import $ from 'jquery';\nimport notification from 'core/notification';\nimport ajax from 'core/ajax';\nimport ModalFactory from 'core/modal_factory';\n\nexport const init = () => {\n    get_bot_type_message();\n    get_model_max_tokens();\n    set_tone_parameters();\n    set_length_parameters();\n};\n\n/**\n * Delete a content\n */\nfunction get_bot_type_message() {\n\n    $(\"#id_bot_type\").off();\n    $(\"#id_bot_type\").on('change', function () {\n        var id = $(this).val();\n        var get_system_message = ajax.call([{\n            methodname: 'cria_get_bot_type_message',\n            args: {\n                id: id\n            }\n        }]);\n\n        get_system_message[0].done(function (result) {\n            if ($('#id_bot_system_message').length) {\n                $('#id_bot_system_message').val('');\n                $('#id_bot_system_message').val(result.trim());\n            }\n\n            if ($('#bot_system_message').length) {\n                $('#bot_system_message').val('');\n                $('#bot_system_message').val(result.trim());\n            }\n\n        }).fail(function () {\n            alert('An error has occurred. The record was not deleted');\n        });\n\n    });\n}\n\nfunction get_model_max_tokens() {\n\n    $(\"#id_model_id\").off();\n    $(\"#id_model_id\").on('change', function () {\n        var id = $(this).val();\n\n        if (id != '') {\n            var get_max_tokens = ajax.call([{\n                methodname: 'cria_get_model_max_tokens',\n                args: {\n                    id: id\n                }\n            }]);\n\n            get_max_tokens[0].done(function (result) {\n                if ($('[name=\"max_tokens\"]').length) {\n                    $('[name=\"max_tokens\"]').val('');\n                    $('[name=\"max_tokens\"]').val(result);\n                }\n\n                if ($('#id_max_tokens').length) {\n                    $('#id_max_tokens').val('');\n                    $('#id_max_tokens').val(result);\n                }\n\n                if ($('#id_max_context').length) {\n                    $('#id_max_context').val('');\n                    $('#id_max_context').val(result);\n                }\n\n                if ($('[name=\"max_context\"]').length) {\n                    $('[name=\"max_context\"]').val('');\n                    $('[name=\"max_context\"]').val(result);\n                }\n            }).fail(function () {\n                alert('An error has occurred. The record was not deleted');\n            });\n            $('#cria-tone-buttons').show();\n        } else {\n            $('#cria-tone-buttons').hide();\n        }\n    });\n}\n\n/**\n * Update the tone parameters\n */\nfunction set_tone_parameters() {\n\n    $('.btn-gpt-tone').off();\n    $('.btn-gpt-tone').on('click', function () {\n        // remove class active for all buttons with class .btn-gpt-tone\n        $('.btn-gpt-tone').removeClass('active');\n        // Add class active to this button\n        $(this).addClass('active');\n        // Update id_temperature\n        $('[name=\"temperature\"]').val($(this).data('temperature'));\n        // Update id_top_p\n        $('[name=\"top_p\"]').val($(this).data('top_p'));\n        // pdate top_k\n        $('[name=\"top_k\"]').val($(this).data('top_k'));\n    });\n}\n\n/**\n * Set length paramters\n */\nfunction set_length_parameters() {\n    let max_tokens = 0;\n    // Set button short\n    $('.btn-short').off();\n    $('.btn-short').on('click', function () {\n        max_tokens = $('[name=\"max_context\"]').val();\n        $('[name=\"max_tokens\"]').val(max_tokens / 8);\n        $('.btn-medium').removeClass('active');\n        $('.btn-long').removeClass('active');\n        $(this).addClass('active');\n    });\n    // Set button medium\n    $('.btn-medium').off();\n    $('.btn-medium').on('click', function () {\n        max_tokens = $('[name=\"max_context\"]').val();\n        $('[name=\"max_tokens\"]').val(max_tokens / 2);\n        $('.btn-short').removeClass('active');\n        $('.btn-long').removeClass('active');\n        $(this).addClass('active');\n    });\n    // Set button long\n    $('.btn-long').off();\n    $('.btn-long').on('click', function () {\n        max_tokens = $('[name=\"max_context\"]').val();\n        $('[name=\"max_tokens\"]').val(max_tokens);\n        $('.btn-short').removeClass('active');\n        $('.btn-medium').removeClass('active');\n        $(this).addClass('active');\n    });\n}\n\n"],"names":["off","on","id","this","val","ajax","call","methodname","args","done","result","length","trim","fail","alert","show","hide","removeClass","addClass","data","max_tokens","set_length_parameters"],"mappings":"ygBAKoB,yBAYd,gBAAgBA,0BAChB,gBAAgBC,GAAG,UAAU,eACvBC,IAAK,mBAAEC,MAAMC,MACQC,cAAKC,KAAK,CAAC,CAChCC,WAAY,4BACZC,KAAM,CACFN,GAAIA,OAIO,GAAGO,MAAK,SAAUC,SAC7B,mBAAE,0BAA0BC,6BAC1B,0BAA0BP,IAAI,wBAC9B,0BAA0BA,IAAIM,OAAOE,UAGvC,mBAAE,uBAAuBD,6BACvB,uBAAuBP,IAAI,wBAC3B,uBAAuBA,IAAIM,OAAOE,YAGzCC,MAAK,WACJC,MAAM,+EAQZ,gBAAgBd,0BAChB,gBAAgBC,GAAG,UAAU,eACvBC,IAAK,mBAAEC,MAAMC,MAEP,IAANF,IACqBG,cAAKC,KAAK,CAAC,CAC5BC,WAAY,4BACZC,KAAM,CACFN,GAAIA,OAIG,GAAGO,MAAK,SAAUC,SACzB,mBAAE,uBAAuBC,6BACvB,uBAAuBP,IAAI,wBAC3B,uBAAuBA,IAAIM,UAG7B,mBAAE,kBAAkBC,6BAClB,kBAAkBP,IAAI,wBACtB,kBAAkBA,IAAIM,UAGxB,mBAAE,mBAAmBC,6BACnB,mBAAmBP,IAAI,wBACvB,mBAAmBA,IAAIM,UAGzB,mBAAE,wBAAwBC,6BACxB,wBAAwBP,IAAI,wBAC5B,wBAAwBA,IAAIM,YAEnCG,MAAK,WACJC,MAAM,4EAER,sBAAsBC,4BAEtB,sBAAsBC,8BAU9B,iBAAiBhB,0BACjB,iBAAiBC,GAAG,SAAS,+BAEzB,iBAAiBgB,YAAY,8BAE7Bd,MAAMe,SAAS,8BAEf,wBAAwBd,KAAI,mBAAED,MAAMgB,KAAK,oCAEzC,kBAAkBf,KAAI,mBAAED,MAAMgB,KAAK,8BAEnC,kBAAkBf,KAAI,mBAAED,MAAMgB,KAAK,4BAQrCC,WAAa,sBAEf,cAAcpB,0BACd,cAAcC,GAAG,SAAS,WACxBmB,YAAa,mBAAE,wBAAwBhB,0BACrC,uBAAuBA,IAAIgB,WAAa,uBACxC,eAAeH,YAAY,8BAC3B,aAAaA,YAAY,8BACzBd,MAAMe,SAAS,iCAGnB,eAAelB,0BACf,eAAeC,GAAG,SAAS,WACzBmB,YAAa,mBAAE,wBAAwBhB,0BACrC,uBAAuBA,IAAIgB,WAAa,uBACxC,cAAcH,YAAY,8BAC1B,aAAaA,YAAY,8BACzBd,MAAMe,SAAS,iCAGnB,aAAalB,0BACb,aAAaC,GAAG,SAAS,WACvBmB,YAAa,mBAAE,wBAAwBhB,0BACrC,uBAAuBA,IAAIgB,gCAC3B,cAAcH,YAAY,8BAC1B,eAAeA,YAAY,8BAC3Bd,MAAMe,SAAS,aAlIrBG"}