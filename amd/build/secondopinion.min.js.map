{"version":3,"file":"secondopinion.min.js","sources":["../src/secondopinion.js"],"sourcesContent":["import $ from 'jquery';\nimport ajax from 'core/ajax';\nimport config from 'core/config';\n\nexport const init = () => {\n    process_notes();\n};\n\n/**\n * Delete a content\n */\nfunction process_notes() {\n\n    $(\"#process-notes\").off();\n    $(\"#process-notes\").on('click', function () {\n        $('#cria-cost').hide();\n        var bot_id = $(this).data('bot_id');\n        var language = $('#language').val();\n        var content = 'rubric:' + $('#rubric').val() + '\\n' + 'assignment:' + $('#assignment').val();\n        var voice = $('input[name=voice]:checked').val();\n        var paraphrase = $('#paraphrase').val();\n        var prompt = '[INSTRUCTIONS]';\n        prompt += 'Please evaluate the following student assessment based on the provided rubric. Separate each skills into a list and always provide a sentence ' +\n            'on why that score was provided. Provide the final ' +\n            'numerical score as a percentage and a corresponding letter grade. The total possible score is the highest ' +\n            'points that can be obtained in each criteria. Final score = (total score obtained on the assignment / total possible score)*100\\n' +\n            'At the bottom, provide 3-5 answers to the student on improving their writing moving forward.'\n        prompt += '[/INSTRUCTIONS]';\n\n\n        $('#process-notes').hide();\n        $('#starting-process').show();\n        //Delete the record\n        var gpt_response = ajax.call([{\n            methodname: 'cria_get_gpt_response',\n            args: {\n                bot_id: bot_id,\n                chat_id: 0,\n                prompt: prompt,\n                content: content\n            }\n        }]);\n\n        gpt_response[0].done(function (result) {\n            let data = JSON.parse(result);\n\n            $('#starting-process').hide();\n            $('#almost-done').show();\n            // JQuery Ajax call to process.php\n            setTimeout(function () {\n                $('#almost-done').hide();\n                $('#process-notes').show();\n                $('#cria-cost').html('$' + data.cost.toPrecision(6));\n                $('#cria-translation-container').html(data.message);\n                $('#cria-cost').show();\n            }, 2000);\n\n            // $('#cria-prompt-tokens').html(data.prompt_tokens);\n            // $('#cria-completion-tokens').html(data.completion_tokens);\n            // $('#cria-total-tokens').html(data.total_tokens);\n\n        }).fail(function () {\n            alert('An error has occurred.');\n        });\n    });\n}"],"names":["off","on","hide","bot_id","this","data","content","val","prompt","show","ajax","call","methodname","args","chat_id","done","result","JSON","parse","setTimeout","html","cost","toPrecision","message","fail","alert"],"mappings":"4ZAIoB,yBASd,kBAAkBA,0BAClB,kBAAkBC,GAAG,SAAS,+BAC1B,cAAcC,WACZC,QAAS,mBAAEC,MAAMC,KAAK,UAEtBC,UADW,mBAAE,aAAaC,MAChB,WAAY,mBAAE,WAAWA,MAAzB,iBAAwD,mBAAE,eAAeA,OAGnFC,SAFQ,mBAAE,6BAA6BD,OAC1B,mBAAE,eAAeA,MACrB,kBACbC,QAAU,0gBAKVA,QAAU,sCAGR,kBAAkBN,2BAClB,qBAAqBO,OAEJC,cAAKC,KAAK,CAAC,CAC1BC,WAAY,wBACZC,KAAM,CACFV,OAAQA,OACRW,QAAS,EACTN,OAAQA,OACRF,QAASA,YAIJ,GAAGS,MAAK,SAAUC,YACvBX,KAAOY,KAAKC,MAAMF,4BAEpB,qBAAqBd,2BACrB,gBAAgBO,OAElBU,YAAW,+BACL,gBAAgBjB,2BAChB,kBAAkBO,2BAClB,cAAcW,KAAK,IAAMf,KAAKgB,KAAKC,YAAY,wBAC/C,+BAA+BF,KAAKf,KAAKkB,6BACzC,cAAcd,SACjB,QAMJe,MAAK,WACJC,MAAM"}