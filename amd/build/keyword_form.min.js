define("local_cria/keyword_form",["exports","jquery","core/notification","core/ajax"],(function(_exports,_jquery,_notification,_ajax){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_notification=_interopRequireDefault(_notification),_ajax=_interopRequireDefault(_ajax);function edit_synonym(){(0,_jquery.default)(".edit-synonym").off(),(0,_jquery.default)(".edit-synonym").on("click",(function(){var id=(0,_jquery.default)(this).data("id");let synonym=(0,_jquery.default)(this),row=(0,_jquery.default)(this).closest("tr");(0,_jquery.default)(this).css("padding","5px"),(0,_jquery.default)(this).on("keypress",(function(e){if(13==e.which){e.preventDefault();let value=(0,_jquery.default)(this).text();_ajax.default.call([{methodname:"cria_synonym_update",args:{id:id,value:value}}])[0].done((function($result){if(0==row.find("td > span").length){let html='<span class="badge badge-pill badge-success">Saved</span>';synonym.closest("td").append(html)}question.blur(),(0,_jquery.default)("id_save").focus()})).fail((function(){alert("An error has occurred. The question was not saved.")}))}}))}))}function delete_synonym(){(0,_jquery.default)(".delete-synonym").off(),(0,_jquery.default)(".delete-synonym").on("click",(function(){let id=(0,_jquery.default)(this).data("id"),row=(0,_jquery.default)(this).closest("tr");_notification.default.confirm("Delete","Are you sure you want to delete this synonym?","Delete",M.util.get_string("cancel","local_cria"),(function(){_ajax.default.call([{methodname:"cria_synonym_delete",args:{id:id}}])[0].done((function($result){row.remove()})).fail((function(){alert("An error has occurred. The question example was not saved.")}))}))}))}_exports.init=()=>{edit_synonym(),delete_synonym(),(0,_jquery.default)(".btn-add-synonym").off(),(0,_jquery.default)(".btn-add-synonym").on("click",(function(){var keyword_id=(0,_jquery.default)('[name="id"]').val(),synonym_text=(0,_jquery.default)("#cria-synonym").val();_ajax.default.call([{methodname:"cria_synonym_insert",args:{keyword_id:keyword_id,value:synonym_text}}])[0].done((function($result){let id=$result,html='<tr>\n                        <td>\n                            <div class="edit-synonym" style="cursor: pointer;" contenteditable="true"\n                                 data-id="'.concat(id,'">').concat(synonym_text,'</div>\n                                 <span class="badge badge-pill badge-success">Saved</span>\n                        </td>\n                        <td>\n                            <button type="button" class="btn btn-outline-danger delete-synonym" data-id="').concat(id,'">\n                                Delete\n                            </button>\n                        </td>\n                    </tr>');(0,_jquery.default)("#cria-synonyms-table").append(html),delete_synonym(),edit_synonym()})).fail((function(){alert("An error has occurred. The synonym was not saved.")}))}))}}));

//# sourceMappingURL=keyword_form.min.js.map