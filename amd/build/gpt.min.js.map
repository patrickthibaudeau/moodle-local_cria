{"version":3,"file":"gpt.min.js","sources":["../src/gpt.js"],"sourcesContent":["import $ from 'jquery';\r\nimport ajax from 'core/ajax';\r\n\r\nexport const init = () => {\r\n    get_response();\r\n};\r\n\r\n/**\r\n * Delete a content\r\n */\r\nfunction get_response() {\r\n\r\n    $(\"#submit-question\").off();\r\n    $(\"#submit-question\").on('click', function () {\r\n        var bot_id = $(this).data('bot_id');\r\n        var prompt = '[INSTRUCTIONS]' + $('#user-prompt').val() + '[/INSTRUCTIONS]'\r\n        var content  = '[CONTEXT]' + $('#cria-test-input').val() + '[/CONTEXT]'\r\n        var chat_id = $('#cria-chat-id').val();\r\n        $(\"#submit-question\").hide();\r\n        $(\"#starting-process\").show();\r\n        //Delete the record\r\n        var gpt_response = ajax.call([{\r\n            methodname: 'cria_get_gpt_response',\r\n            args: {\r\n                bot_id: bot_id,\r\n                chat_id: chat_id,\r\n                prompt: prompt,\r\n                content: content\r\n            }\r\n        }]);\r\n\r\n        gpt_response[0].done(function (result) {\r\n            // console.log(result);\r\n            let data = JSON.parse(result);\r\n            $(\"#submit-question\").show();\r\n            $(\"#starting-process\").hide();\r\n            $('#cria-conversation').append().html(`<p> ${data.message}</p>`);\r\n            $('#cria-prompt-tokens').html(data.prompt_tokens);\r\n            $('#cria-completion-tokens').html(data.completion_tokens);\r\n            $('#cria-total-tokens').html(data.total_tokens);\r\n            $('#cria-cost').html('$' + data.cost.toPrecision(6));\r\n        }).fail(function () {\r\n            alert('An error has occurred.');\r\n        });\r\n    });\r\n}"],"names":["off","on","bot_id","this","data","prompt","val","content","chat_id","hide","show","ajax","call","methodname","args","done","result","JSON","parse","append","html","message","prompt_tokens","completion_tokens","total_tokens","cost","toPrecision","fail","alert"],"mappings":"oVAGoB,yBASd,oBAAoBA,0BACpB,oBAAoBC,GAAG,SAAS,eAC1BC,QAAS,mBAAEC,MAAMC,KAAK,UACtBC,OAAS,kBAAmB,mBAAE,gBAAgBC,MAAQ,kBACtDC,QAAW,aAAc,mBAAE,oBAAoBD,MAAQ,aACvDE,SAAU,mBAAE,iBAAiBF,0BAC/B,oBAAoBG,2BACpB,qBAAqBC,OAEJC,cAAKC,KAAK,CAAC,CAC1BC,WAAY,wBACZC,KAAM,CACFZ,OAAQA,OACRM,QAASA,QACTH,OAAQA,OACRE,QAASA,YAIJ,GAAGQ,MAAK,SAAUC,YAEvBZ,KAAOa,KAAKC,MAAMF,4BACpB,oBAAoBN,2BACpB,qBAAqBD,2BACrB,sBAAsBU,SAASC,mBAAYhB,KAAKiB,qCAChD,uBAAuBD,KAAKhB,KAAKkB,mCACjC,2BAA2BF,KAAKhB,KAAKmB,uCACrC,sBAAsBH,KAAKhB,KAAKoB,kCAChC,cAAcJ,KAAK,IAAMhB,KAAKqB,KAAKC,YAAY,OAClDC,MAAK,WACJC,MAAM"}