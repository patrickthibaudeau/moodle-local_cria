define("local_cria/translate",["exports","jquery","core/ajax","core/config"],(function(_exports,_jquery,_ajax,_config){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_config=_interopRequireDefault(_config);_exports.init=()=>{(0,_jquery.default)("#process-notes").off(),(0,_jquery.default)("#process-notes").on("click",(function(){(0,_jquery.default)("#cria-cost").hide();var bot_id=(0,_jquery.default)(this).data("bot_id"),language=(0,_jquery.default)("#language").val(),content="[CONTEXT]"+(0,_jquery.default)("#notes").val()+"[/CONTEXT]",voice=(0,_jquery.default)("input[name=voice]:checked").val(),paraphrase=(0,_jquery.default)("#paraphrase").val(),prompt="[INSTRUCTIONS]Forget any previous translations and ";switch((0,_jquery.default)("#cria-translation-container").html('<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">...</span>'),prompt+="fr"==language?"translate the context into French":"translate the context into English","yes"==paraphrase&&(prompt+=" and paraphrase the translation without changing the core message while"),voice){case"0":prompt+=" using a neutral tone.";break;case"1":prompt+=" using a formal tone.";break;case"2":prompt+=" using a an informal tone.";break;case"3":prompt+=" using an academic tone.";break;case"4":prompt+=" using a literary tone."}prompt+=" Only provide one translation.[/INSTRUCTIONS]",(0,_jquery.default)("#process-notes").hide(),(0,_jquery.default)("#starting-process").show(),_ajax.default.call([{methodname:"cria_get_gpt_response",args:{bot_id:bot_id,chat_id:0,prompt:prompt,content:content}}])[0].done((function(result){(0,_jquery.default)("#starting-process").hide(),(0,_jquery.default)("#almost-done").show(),setTimeout((function(){(0,_jquery.default)("#almost-done").hide(),(0,_jquery.default)("#process-notes").show(),(0,_jquery.default)("#cria-cost").html("$"+result.cost.toPrecision(6)),(0,_jquery.default)("#cria-translation-container").html(result.message),(0,_jquery.default)("#cria-cost").show()}),2e3)})).fail((function(){alert("An error has occurred.")}))}))}}));

//# sourceMappingURL=translate.min.js.map