define("local_cria/question_form",["exports","jquery","core/notification","core/ajax"],(function(_exports,_jquery,_notification,_ajax){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_notification=_interopRequireDefault(_notification),_ajax=_interopRequireDefault(_ajax);function delete_example_question(){(0,_jquery.default)(".delete-question-example").off(),(0,_jquery.default)(".delete-question-example").on("click",(function(){let id=(0,_jquery.default)(this).data("id"),row=(0,_jquery.default)(this).closest("tr");_notification.default.confirm("Delete","Are you sure you want to delete this example question? The example question cannot be recovered.","Delete",M.util.get_string("cancel","local_cria"),(function(){_ajax.default.call([{methodname:"cria_question_example_delete",args:{id:id}}])[0].done((function($result){row.remove()})).fail((function(){alert("An error has occurred. The question example was not saved.")}))}))}))}_exports.init=()=>{(0,_jquery.default)(".example-question").off(),(0,_jquery.default)(".example-question").on("click",(function(){var id=(0,_jquery.default)(this).data("id");let question=(0,_jquery.default)(this);console.log(id),(0,_jquery.default)(this).css("padding","5px"),(0,_jquery.default)(this).on("keypress",(function(e){if(13==e.which){e.preventDefault();let value=(0,_jquery.default)(this).text();_ajax.default.call([{methodname:"cria_question_example_update",args:{id:id,value:value}}])[0].done((function($result){alert("question updated");let html='<span class="badge badge-pill badge-warning">Unpublished</span>';question.closest(".delete-question-example").prepend(html)})).fail((function(){alert("An error has occurred. The question was not saved.")}))}}))})),delete_example_question(),(0,_jquery.default)(".btn-add-question-example").off(),(0,_jquery.default)(".btn-add-question-example").on("click",(function(){window.onbeforeunload=null;var question_id=(0,_jquery.default)('[name="id"]').val(),question_text=(0,_jquery.default)("#cria-question-example").val();_ajax.default.call([{methodname:"cria_question_example_insert",args:{questionid:question_id,value:question_text}}])[0].done((function($result){let id=$result,html='<tr>\n                        <td>\n                            <div class="example-question" style="cursor: pointer;" contenteditable="true"\n                                 data-id="'.concat(id,'">').concat(question_text,'</div>\n                        </td>\n                        <td>\n                            <span class="badge badge-pill badge-warning">Unpublished</span>\n                            \n                            <button type="button" class="btn btn-outline-danger delete-question-example" data-id="').concat(id,'">\n                                Delete\n                            </button>\n                        </td>\n                    </tr>');(0,_jquery.default)("#cria-question-examples-table").append(html),delete_example_question()})).fail((function(){alert("An error has occurred. The question example was not saved.")}))}))}}));

//# sourceMappingURL=question_form.min.js.map