define("local_cria/minutes_master",["exports","jquery","core/ajax","core/config"],(function(_exports,_jquery,_ajax,_config){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_config=_interopRequireDefault(_config);_exports.init=()=>{(0,_jquery.default)("#process-notes").off(),(0,_jquery.default)("#process-notes").on("click",(function(){(0,_jquery.default)("#cria-cost").hide();var bot_id=(0,_jquery.default)(this).data("bot_id"),language=(0,_jquery.default)("#language").val(),content="[CONTEXT]"+(0,_jquery.default)("#notes").val()+"[/CONTEXT]",prompt="[INSTRUCTIONS]Create meeting notes from the context provided and separate the notes by topic. Each topic should be in a \n        numbered list. Once done, create all action items from the context. Format the action items as a list having \n        the following headings: Assigned to, Description, Date due[/INSTRUCTIONS]";"fr"==language&&(prompt="[INSTRUCTIONS]Créez des notes de réunion à partir du context et séparez les notes par sujet. Chaque sujet doit être dans une \n            liste numérotée. Une fois terminé, créez toutes les tâches à partir de la transcription. Formatez les \n            tâches comme une list ayant les entêtes suivantes: Assigné à, Description, Date d'échéance[/INSTRUCTIONS]");var project_name=(0,_jquery.default)("#project_name").val(),date=(0,_jquery.default)("#date").val(),time=(0,_jquery.default)("#time").val(),location=(0,_jquery.default)("#location").val();(0,_jquery.default)("#process-notes").hide(),(0,_jquery.default)("#starting-process").show(),_ajax.default.call([{methodname:"cria_get_gpt_response",args:{bot_id:bot_id,chat_id:0,prompt:prompt,content:content}}])[0].done((function(result){let data=JSON.parse(result),form_data={project_name:project_name,date:date,time:time,location:location,minutes:data.message};(0,_jquery.default)("#starting-process").hide(),(0,_jquery.default)("#almost-done").show(),setTimeout((function(){(0,_jquery.default)("#almost-done").hide(),(0,_jquery.default)("#process-complete").show(),_jquery.default.post(_config.default.wwwroot+"/local/cria/plugins/minutes_master/process.php",form_data,(function(response){let path_data=JSON.parse(response);window.location.href=_config.default.wwwroot+"/local/cria/plugins/minutes_master/download.php?path="+path_data.path+"&file="+path_data.file_name,setTimeout((function(){(0,_jquery.default)("#cria-cost").show(),(0,_jquery.default)("#cria-cost").html("$"+data.cost.toPrecision(6)),(0,_jquery.default)("#process-complete").hide(),(0,_jquery.default)("#process-notes").show()}),1500)}))}),2e3),(0,_jquery.default)("#cria-message").html(data.message)})).fail((function(){alert("An error has occurred.")}))}))}}));

//# sourceMappingURL=minutes_master.min.js.map