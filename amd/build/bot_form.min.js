define("local_cria/bot_form",["exports","jquery","core/notification","core/ajax","core/modal_factory","local_cria/select2"],(function(_exports,_jquery,_notification,_ajax,_modal_factory,_select){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_notification=_interopRequireDefault(_notification),_ajax=_interopRequireDefault(_ajax),_modal_factory=_interopRequireDefault(_modal_factory),_select=_interopRequireDefault(_select);_exports.init=()=>{(0,_jquery.default)("#id_child_bots").select2({theme:"bootstrap4"}),(0,_jquery.default)(".select2-selection__choice__remove").addClass("btn btn-sm btn-danger mr-1"),function(){switch((0,_jquery.default)('[name="tone"]').val()){case"creative":(0,_jquery.default)("#tone-creative").addClass("active");break;case"balanced":(0,_jquery.default)("#tone-balanced").addClass("active");break;case"precise":(0,_jquery.default)("#tone-precise").addClass("active")}}(),function(){switch((0,_jquery.default)('[name="response_length"]').val()){case"short":(0,_jquery.default)(".btn-short").addClass("active");break;case"medium":(0,_jquery.default)(".btn-medium").addClass("active");break;case"long":(0,_jquery.default)(".btn-long").addClass("active")}}(),(0,_jquery.default)("#id_bot_type").off(),(0,_jquery.default)("#id_bot_type").on("change",(function(){var id=(0,_jquery.default)(this).val();_ajax.default.call([{methodname:"cria_get_bot_type_message",args:{id:id}}])[0].done((function(result){(0,_jquery.default)("#id_bot_system_message").length&&((0,_jquery.default)("#id_bot_system_message").val(""),(0,_jquery.default)("#id_bot_system_message").val(result.trim())),(0,_jquery.default)('[name="bot_system_message"]').length&&((0,_jquery.default)('[name="bot_system_message"]').val(""),(0,_jquery.default)('[name="bot_system_message"]').val(result.trim()))})).fail((function(){alert("An error has occurred. The record was not deleted")}))})),(0,_jquery.default)("#id_model_id").off(),(0,_jquery.default)("#id_model_id").on("change",(function(){var id=(0,_jquery.default)(this).val();""!=id?(_ajax.default.call([{methodname:"cria_get_model_max_tokens",args:{id:id}}])[0].done((function(result){(0,_jquery.default)('[name="bot_max_tokens"]').val(result),(0,_jquery.default)('[name="max_tokens"]').length&&((0,_jquery.default)('[name="max_tokens"]').val(""),(0,_jquery.default)('[name="max_tokens"]').val(result)),(0,_jquery.default)(".btn-short").hasClass("active")&&(0,_jquery.default)('[name="max_tokens"]').val(result/8),(0,_jquery.default)(".btn-medium").hasClass("active")&&(0,_jquery.default)('[name="max_tokens"]').val(result/2),(0,_jquery.default)(".btn-long").hasClass("active")&&(0,_jquery.default)('[name="max_tokens"]').val(result-2e3)})).fail((function(){alert("An error has occurred. The record was not deleted")})),(0,_jquery.default)("#cria-tone-buttons").show()):(0,_jquery.default)("#cria-tone-buttons").hide()})),(0,_jquery.default)(".btn-gpt-tone").off(),(0,_jquery.default)(".btn-gpt-tone").on("click",(function(){(0,_jquery.default)(".btn-gpt-tone").removeClass("active"),(0,_jquery.default)(this).addClass("active");let id=(0,_jquery.default)(this).attr("id");(0,_jquery.default)('[name="tone"]').val(id.replace("tone-","")),(0,_jquery.default)('[name="temperature"]').val((0,_jquery.default)(this).data("temperature")),(0,_jquery.default)('[name="top_p"]').val((0,_jquery.default)(this).data("top_p")),(0,_jquery.default)('[name="top_k"]').val((0,_jquery.default)(this).data("top_k")),(0,_jquery.default)('[name="min_relevance"]').val((0,_jquery.default)(this).data("min_relevance"))})),function(){let max_tokens=0;(0,_jquery.default)(".btn-short").off(),(0,_jquery.default)(".btn-short").on("click",(function(){max_tokens=(0,_jquery.default)('[name="bot_max_tokens"]').val(),(0,_jquery.default)('[name="max_tokens"]').val(max_tokens/8),(0,_jquery.default)(".btn-medium").removeClass("active"),(0,_jquery.default)(".btn-long").removeClass("active"),(0,_jquery.default)(this).addClass("active"),(0,_jquery.default)('[name="response_length"]').val("short")})),(0,_jquery.default)(".btn-medium").off(),(0,_jquery.default)(".btn-medium").on("click",(function(){max_tokens=(0,_jquery.default)('[name="bot_max_tokens"]').val(),(0,_jquery.default)('[name="max_tokens"]').val(max_tokens/2),(0,_jquery.default)(".btn-short").removeClass("active"),(0,_jquery.default)(".btn-long").removeClass("active"),(0,_jquery.default)(this).addClass("active"),(0,_jquery.default)('[name="response_length"]').val("medium")})),(0,_jquery.default)(".btn-long").off(),(0,_jquery.default)(".btn-long").on("click",(function(){max_tokens=(0,_jquery.default)('[name="bot_max_tokens"]').val(),(0,_jquery.default)('[name="max_tokens"]').val(max_tokens-2e3),(0,_jquery.default)(".btn-short").removeClass("active"),(0,_jquery.default)(".btn-medium").removeClass("active"),(0,_jquery.default)(this).addClass("active"),(0,_jquery.default)('[name="response_length"]').val("long")}))}()}}));

//# sourceMappingURL=bot_form.min.js.map