define("local_cria/secondopinion",["exports","jquery","core/ajax","core/config"],(function(_exports,_jquery,_ajax,_config){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_config=_interopRequireDefault(_config);_exports.init=()=>{(0,_jquery.default)("#process-notes").off(),(0,_jquery.default)("#process-notes").on("click",(function(){(0,_jquery.default)("#cria-cost").hide();var bot_id=(0,_jquery.default)(this).data("bot_id"),content=((0,_jquery.default)("#language").val(),"rubric:"+(0,_jquery.default)("#rubric").val()+"\nassignment:"+(0,_jquery.default)("#assignment").val());(0,_jquery.default)("input[name=voice]:checked").val(),(0,_jquery.default)("#paraphrase").val(),_ajax.default.call([{methodname:"cria_get_bot_prompt",args:{bot_id:bot_id}}])[0].done((function(result){let prompt="[INSTRUCTIONS]";prompt+=result,prompt+="[/INSTRUCTIONS]",(0,_jquery.default)("#process-notes").hide(),(0,_jquery.default)("#starting-process").show(),_ajax.default.call([{methodname:"cria_get_gpt_response",args:{bot_id:bot_id,chat_id:0,prompt:prompt,content:content}}])[0].done((function(result){let data=JSON.parse(result);(0,_jquery.default)("#starting-process").hide(),(0,_jquery.default)("#almost-done").show(),setTimeout((function(){(0,_jquery.default)("#almost-done").hide(),(0,_jquery.default)("#process-notes").show(),(0,_jquery.default)("#cria-cost").html("$"+data.cost.toPrecision(6)),(0,_jquery.default)("#cria-translation-container").html(data.message),(0,_jquery.default)("#cria-cost").show()}),2e3)})).fail((function(){alert("An error has occurred.")}))})).fail((function(){alert("An error has occurred. Prompt was not returned properly")})),console.log(prompt)}))}}));

//# sourceMappingURL=secondopinion.min.js.map